{"openapi":"3.0.0","info":{"title":"API HelpMate","version":"1.1.2"},"servers":[{"url":"http://localhost:3001","description":"Local server"}],"tags":[{"name":"User","description":"User management, himself and admin"},{"name":"Service","description":"Service management"}],"paths":{"/services":{"post":{"summary":"Create a new service","tags":["Service"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceCreateSchema"}}}},"responses":{"201":{"description":"Service created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceCreateSchema"}}}},"400":{"description":"Missing required fields"},"500":{"description":"Internal server error"}}},"get":{"summary":"Get all services","tags":["Service"],"responses":{"200":{"description":"List of services","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ServiceCreateSchema"}}}}},"500":{"description":"Internal server error"}}}},"/services/{id}":{"get":{"summary":"Get service by ID","tags":["Service"],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"Service ID"}],"responses":{"200":{"description":"Service info","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceCreateSchema"}}}},"400":{"description":"Service ID is required"},"404":{"description":"Service not found"},"500":{"description":"Internal server error"}}},"patch":{"summary":"Update service by ID","tags":["Service"],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"Service ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceUpdateSchema"}}}},"responses":{"204":{"description":"Service updated"},"400":{"description":"Service ID is required or No fields to update provided"},"500":{"description":"Internal server error"}}},"delete":{"summary":"Delete service by ID","tags":["Service"],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"Service ID"}],"responses":{"204":{"description":"Service deleted"},"400":{"description":"Service ID is required"},"500":{"description":"Internal server error"}}}},"/services/user/{userID}":{"get":{"summary":"Get services by user ID","tags":["Service"],"parameters":[{"in":"path","name":"userID","schema":{"type":"integer"},"required":true,"description":"User ID"}],"responses":{"200":{"description":"List of services by user","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ServiceCreateSchema"}}}}},"400":{"description":"User ID is required"},"500":{"description":"Internal server error"}}}},"/auth":{"post":{"summary":"Check authentication","tags":["User"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Authenticated"},"401":{"description":"Unauthorized"}}}},"/login":{"post":{"summary":"User login","tags":["User"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginSchema"}}}},"responses":{"200":{"description":"Successful login"},"201":{"description":"User logged in successfully"},"401":{"description":"Unauthorized"},"404":{"description":"User not found"},"500":{"description":"Internal server error"}}}},"/registration":{"post":{"summary":"User registration","tags":["User"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserSchema"}}}},"responses":{"201":{"description":"User created"},"400":{"description":"Bad request"},"409":{"description":"Email or phone number already used"},"500":{"description":"Internal server error"}}}},"/me":{"get":{"summary":"Get my info","tags":["User"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"User info","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSchema"}}}},"401":{"description":"Unauthorized"},"500":{"description":"Internal server error"}}},"patch":{"summary":"Update my info","tags":["User"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSchema"}}}},"responses":{"200":{"description":"User updated"},"400":{"description":"Bad request"},"401":{"description":"Unauthorized"},"409":{"description":"Email or phone number already used"},"500":{"description":"Internal server error"}}},"delete":{"summary":"Delete my account","tags":["User"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"User deleted successfully"},"500":{"description":"Internal server error"}}}},"/admin/login":{"post":{"summary":"Admin login","tags":["User"],"description":"Admin only","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginSchema"}}}},"responses":{"201":{"description":"Admin logged in successfully"},"403":{"description":"Forbidden"},"500":{"description":"Internal server error"}}}},"/admin/users":{"post":{"summary":"Register a new admin user","tags":["User"],"description":"Admin only","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminSchema"}}}},"responses":{"201":{"description":"Admin user created"},"400":{"description":"Bad request"},"401":{"description":"Unauthorized"},"409":{"description":"Email already used"},"500":{"description":"Internal server error"}}},"get":{"summary":"Get all users","tags":["User"],"description":"Admin only","security":[{"bearerAuth":[]}],"responses":{"200":{"description":"List of users","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AdminPanelSchema"}}}}},"401":{"description":"Unauthorized"},"500":{"description":"Internal server error"}}}},"/admin/users/{id}":{"patch":{"summary":"Update user by ID","tags":["User"],"description":"Admin only","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"User ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminPanelSchema"}}}},"responses":{"200":{"description":"User updated"},"204":{"description":"User updated"},"400":{"description":"Bad request"},"401":{"description":"Unauthorized"},"404":{"description":"User not found"},"500":{"description":"Internal server error"}}},"delete":{"summary":"Delete user by ID","tags":["User"],"description":"Admin only","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"User ID"}],"responses":{"200":{"description":"User deleted"},"204":{"description":"User deleted"},"401":{"description":"Unauthorized"},"404":{"description":"User not found"},"500":{"description":"Internal server error"}}}},"/{id}":{"get":{"summary":"Get user by ID","tags":["User"],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"User ID"}],"responses":{"200":{"description":"User info","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSchema"}}}},"404":{"description":"User not found"},"500":{"description":"Internal server error"}}}},"/registration-with-service":{"post":{"summary":"Register user with service","tags":["User"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserWithServiceSchema"}}}},"responses":{"201":{"description":"User and service created successfully"},"500":{"description":"Internal server error"}}}},"/service/{id}":{"get":{"summary":"Get service by ID","tags":["Service"],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"Service ID"}],"responses":{"200":{"description":"Service info","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceCreateSchema"}}}},"400":{"description":"Service ID is required"},"404":{"description":"Service not found"},"500":{"description":"Internal server error"}}},"patch":{"summary":"Update service by ID","tags":["Service"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"Service ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceUpdateSchema"}}}},"responses":{"204":{"description":"Service updated"},"400":{"description":"Service ID is required or No fields to update provided"},"500":{"description":"Internal server error"}}},"delete":{"summary":"Delete service by ID","tags":["Service"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"Service ID"}],"responses":{"204":{"description":"Service deleted"},"400":{"description":"Service ID is required"},"500":{"description":"Internal server error"}}}},"/user/{userID}/services":{"get":{"summary":"Get services by user ID","tags":["Service"],"parameters":[{"in":"path","name":"userID","schema":{"type":"integer"},"required":true,"description":"User ID"}],"responses":{"200":{"description":"List of services by user","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ServiceCreateSchema"}}}}},"400":{"description":"User ID is required"},"500":{"description":"Internal server error"}}}},"/service":{"post":{"summary":"Create a new service","tags":["Service"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceCreateSchema"}}}},"responses":{"201":{"description":"Service created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceCreateSchema"}}}},"400":{"description":"Missing required fields"},"500":{"description":"Internal server error"}}}}},"components":{"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}},"responses":{"UnauthorizedError":{"description":"JWT is missing or invalid","content":{"text/plain":{"schema":{"type":"string"}}}},"ValidationError":{"description":"the error(s) described","content":{"text/plain":{"schema":{"type":"string"}}}}},"schemas":{"ServiceCreateSchema":{"type":"object","properties":{"title":{"type":"string"},"serviceDescription":{"type":"string"},"authorUser":{"type":"integer","format":"int64"},"providerUser":{"type":"integer","format":"int64"},"serviceType":{"type":"integer"},"latitude":{"type":"number","format":"float"},"longitude":{"type":"number","format":"float"}},"required":["title","serviceDescription","authorUser","serviceType"],"example":{"title":"Coupe d'arbre","serviceDescription":"Tailler un arbre","authorUser":1,"serviceType":3}},"ServiceUpdateSchema":{"type":"object","properties":{"title":{"type":"string"},"serviceDescription":{"type":"string"},"providerUser":{"type":"integer","format":"int64"},"serviceType":{"type":"integer","format":"int64"},"latitude":{"type":"number","format":"float"},"longitude":{"type":"number","format":"float"}},"example":{"title":"Coupe d'arbre","serviceDescription":"Tailler un arbre","providerUser":2,"serviceType":3,"latitude":50.123456,"longitude":4.123456}},"ServiceRemoveSchema":{"type":"object","properties":{"id":{"type":"integer","format":"int64"}},"required":["id"],"example":{"id":1}},"ServiceGetByIDSchema":{"type":"object","properties":{"id":{"type":"integer","format":"int64"}},"required":["id"],"example":{"id":1}},"ServiceGetByUserSchema":{"type":"object","properties":{"userID":{"type":"integer","format":"int64"}},"required":["userID"],"example":{"userID":1}},"UserSchema":{"type":"object","properties":{"lastName":{"type":"string"},"firstName":{"type":"string"},"telNumber":{"type":"string"},"mailAddress":{"type":"string"},"userPassword":{"type":"string"}},"required":["lastName","firstName","telNumber","mailAddress","userPassword"],"example":{"lastName":"Haubert","firstName":"John","telNumber":"1234567890","mailAddress":"john.haubert@gmail.com","userPassword":"password"}},"LoginSchema":{"type":"object","properties":{"mailAddress":{"type":"string"},"userPassword":{"type":"string"}},"required":["mailAddress","userPassword"],"example":{"mailAddress":"john.haubert@gmail.com","userPassword":"password"}},"UpdateSchema":{"type":"object","properties":{"lastName":{"type":"string"},"firstName":{"type":"string"},"telNumber":{"type":"string"},"mailAddress":{"type":"string"}},"example":{"lastName":"Doret","firstName":"Kevin","telNumber":"1234567890","mailAddress":"kevin.doret@gmail.com"}},"AdminSchema":{"type":"object","properties":{"lastName":{"type":"string"},"firstName":{"type":"string"},"telNumber":{"type":"string"},"mailAddress":{"type":"string"},"userPassword":{"type":"string"},"isAdmin":{"type":"boolean"}},"required":["lastName","firstName","telNumber","mailAddress","userPassword"],"example":{"lastName":"Doe","firstName":"John","telNumber":"1234567890","mailAddress":"john.doe@example.com","userPassword":"password","isAdmin":true}},"AdminPanelSchema":{"type":"object","properties":{"lastName":{"type":"string"},"firstName":{"type":"string"},"telNumber":{"type":"string"},"mailAddress":{"type":"string"},"isAdmin":{"type":"boolean"}},"required":["lastName","firstName","telNumber","mailAddress"],"example":{"lastName":"Doe","firstName":"John","telNumber":"1234567890","mailAddress":"john.doe@example.com","isAdmin":true}},"UserWithServiceSchema":{"type":"object","properties":{"user":{"$ref":"#/components/schemas/UserSchema"},"service":{"type":"object","properties":{"title":{"type":"string"},"latitude":{"type":"number"},"longitude":{"type":"number"},"serviceDescription":{"type":"string"},"serviceType":{"type":"integer"},"providerUser":{"type":"string"}},"required":["title","latitude","longitude","serviceDescription","serviceType"]}},"example":{"user":{"lastName":"Doe","firstName":"John","telNumber":"1234567890","mailAddress":"john.doe@example.com","userPassword":"password"},"service":{"title":"Gardening","latitude":48.8566,"longitude":2.3522,"serviceDescription":"Lawn mowing and garden maintenance","serviceType":"Outdoor"}}}}}}